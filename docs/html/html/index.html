<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<!-- BEGIN opengraph metadata -->
<meta property="og:title" content="Doxygen Awesome" />
<meta property="og:image" content="https://repository-images.githubusercontent.com/348492097/4f16df80-88fb-11eb-9d31-4015ff22c452" />
<meta property="og:description" content="Custom CSS theme for doxygen html-documentation with lots of customization parameters." />
<meta property="og:url" content="https://jothepro.github.io/doxygen-awesome-css/" />
<!-- END opengraph metadata -->
<!-- BEGIN twitter metadata -->
<meta name="twitter:image:src" content="https://repository-images.githubusercontent.com/348492097/4f16df80-88fb-11eb-9d31-4015ff22c452" />
<meta name="twitter:title" content="Doxygen Awesome" />
<meta name="twitter:description" content="Custom CSS theme for doxygen html-documentation with lots of customization parameters." />
<!-- END twitter metadata -->
<title>Libdescriptor: Libdescriptor</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" type="image/svg+xml" href="logo.drawio.svg"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="toggle-alternative-theme.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="custom-alternative.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- https://tholman.com/github-corners/ -->
<a href="https://github.com/ipcamit/colabfit-descriptor-library" class="github-corner" title="View source on GitHub" target="_blank">
    <svg viewBox="0 0 250 250" width="40" height="40" style="position: absolute; top: 0; border: 0; right: 0; z-index: 99;" aria-hidden="true">
    <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Libdescriptor
   </div>
   <div id="projectbrief">A fully automatic-differentiated high-performance descriptor library.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Libdescriptor </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="anchor" id="md__home_amit_Projects_COLABFIT_colabfit_kim_model_colabfit_descriptor_library_README"></a></p>
<p >Libdescriptor is a high performance descriptor library for providing access to fully differentiable descriptor functions. While <code>libdescriptor</code> is a general purpose descriptor library, it's API compatible with KIM models and associated projects. This will also provide uniform access to various selected descriptors for KLIFF using Pybind11 ports. For gradient calculations, Libdescriptor relies on <a href="https://github.com/EnzymeAD/Enzyme">Enzyme AD</a>, which provides it with capability to trivially generate near analytical performance gradient functions. Use of Enzyme AD enables Libdescriptor to not only provide gradients against coordinates, but against hyperparameters as well, thus opening way for better optimized descriptors. This should enable rapid development, extension and deployment of various descriptors.</p>
<p ><img src="libdescriptor.svg" alt="" style="pointer-events: none;" width="800" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md5"></a>
Compiling</h1>
<p >At present, it needs functioning Enzyme compiler environment, in future it will be provided as binary package or a conda environment. For Installing Enzyme, simply follow the instructions given on enzyme page. At the time of writing these instructions, we are using</p><ul>
<li>LLVM 12.0.1</li>
<li>Enzyme v0.0.41</li>
</ul>
<p >Although Enzyme recommends compiling LLVM/Clang from scratch, in our experience precompiled stock binaries also work fine. Though depending on your platform, your mileage may wary.</p>
<p >Steps to compile <b>Enzyme</b>: </p><div class="fragment"><div class="line"># Get the Clang/LLVM binaries</div>
<div class="line">wget https://github.com/llvm/llvm-project/releases/download/llvmorg-12.0.1/clang+llvm-12.0.1-x86_64-linux-gnu-ubuntu-16.04.tar.xz</div>
<div class="line"># Untar and export environment variables</div>
<div class="line">tar -xvf clang+llvm-12.0.1-x86_64-linux-gnu-ubuntu-16.04.tar.xz</div>
<div class="line">export PATH=&quot;/path/to/clang/extract/bin:&quot;$PATH</div>
<div class="line">export INCLUDE=&quot;/path/to/clang/extract/include:&quot;$INCLUDE</div>
<div class="line">export LD_LIBRARY_PATH=&quot;/path/to/clang/extract/lib:&quot;$LD_LIBRARY_PATH</div>
<div class="line"> </div>
<div class="line"># Get lit (Enzyme needs it for running tests)</div>
<div class="line">wget https://files.pythonhosted.org/packages/7c/0c/2d58790cb0fa24812382289a584e05dd1df4b30ccf5e2218ee5a556a0529/lit-12.0.1.tar.gz</div>
<div class="line">tar -xvf lit-12.0.1.tar.gz</div>
<div class="line">cd lit-12.0.1</div>
<div class="line">pip install . --user</div>
<div class="line"> </div>
<div class="line"># Clone and compile Enzyme</div>
<div class="line">git clone https://github.com/EnzymeAD/Enzyme</div>
<div class="line">cd Enzyme/enzyme</div>
<div class="line">git checkout v0.0.41</div>
<div class="line">mkdir build; cd build</div>
<div class="line">CC=clang CXX=clang++ cmake .. -DLLVM_DIR=/path/to/clang/lib/cmake/llvm -DLLVM_EXTERNAL_LIT=/path/to/lit-12.0.1/lit.py</div>
<div class="line">make </div>
<div class="line"># optional make install if you want</div>
</div><!-- fragment --><p> Now your enzyme is ready to use. For compiling your code, you would need to know the location of your compiled Enzyme libraries. In the build folder you should see 3 shared objects: <code>ClangEnzyme-12.so</code>, <code>LLDEnzyme-12.so</code>, and <code>LLVMEnzyme-12.so</code>. As a rule of thumb, you need <code>ClangEnzyme</code> for compiling single file programs, whereas more complicated build schemes (such as used in this program), needs creating derivatives at link time, using <code>LLDEnzyme</code> file.</p>
<p >You need to provide the location of <code>LLDEnzyme</code> to the <code>Cmake</code> file for successful build. This can be done simply by defining Cmake variable. To build <code>libdescritpor</code> </p><div class="fragment"><div class="line">git clone https://github.com/ipcamit/colabfit-descriptor-library</div>
<div class="line">cd colabfit-descriptor-library</div>
<div class="line">mkdir build; cd build</div>
<div class="line">cmake .. -DENZYME_LIB=/path/to/*Enzyme.so/files</div>
<div class="line">make</div>
</div><!-- fragment --><p> Your build folder should now contain <code>libdescriptor.so</code> file, which you can link against your own projects.</p>
<h1><a class="anchor" id="autotoc_md6"></a>
Python bindings</h1>
<p ><b>WIP</b></p>
<p >Libdescriptor also provides build target for making <code>descriptor.cpython-cp3.xx.so</code> Python module using Pybind11. To use it, you need to install Pybind11 on your system </p><blockquote class="doxtable">
<p >&zwj;Note: pip installation of Pybind11 can cause issues with compiling (it is a known Pybind11 limitation) so it is recommended to use either system installer like <code>apt</code> or <code>rpm</code> or use <code>conda</code>. </p>
</blockquote>
<h1><a class="anchor" id="autotoc_md7"></a>
Descriptors supported (or planned)</h1>
<ul>
<li>[x] Behler Symmetry Functions</li>
<li>[x] <a class="el" href="class_bispectrum.html" title="This implementation is based on the method outlined in Bartok[1], using formulae from VMK[2].">Bispectrum</a></li>
<li>[ ] SOAP (WIP)</li>
<li>[ ] ACE</li>
</ul>
<h1><a class="anchor" id="autotoc_md8"></a>
Extending Libdescriptor</h1>
<p >New descriptors can be added by extending the <code>DescriptorKind</code> class, and implementing its <code>compute</code> function. <code>compute</code> function will compute the descriptor for single atom. It is also advised to write a <code>clone_empty</code> function if you want to take derivatives against hyperparamters. Without an empty clone, Enzyme can segfault at times when default constructor does not initialize all fields of class properly.</p>
<blockquote class="doxtable">
<p >&zwj;When in doubt, make your code more "C" like for higher success rate. </p>
</blockquote>
<p>TODO: More documentation for extending.</p>
<h1><a class="anchor" id="autotoc_md9"></a>
Docker Image</h1>
<p >The repository now contains a Dockerfile, which can be used to install the descriptor library in an isolated environment. It is based on Kim Developer Platform Docker image, so that you have infrastructure to use it out-of-the-box. However, it is independent of KIM, and can be used for your personal projects. In doing so, you can edit the dockerfile and base it on your own project image as per need. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6 </li>
  </ul>
</div>
</body>
</html>
